<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Affection Alignment Institute</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 3D Library for Visualization -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Include STLLoader.js: This is the critical utility for loading .stl files -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/STLLoader.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb; /* Light off-white background */
        }
        #three-container {
            /* Ensure the container is ready for the canvas */
            display: flex;
            justify-content: center;
            align-items: center;
        }
        canvas {
            /* Basic styling for the canvas */
            display: block;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Navigation Header -->
    <header class="bg-white shadow-lg sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <a href="#" class="flex items-center space-x-2">
                <!-- Logo/Icon Placeholder (Sleek, Abstract SVG) -->
                <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                <span class="text-xl font-extrabold text-gray-900 tracking-tight">Z.A.C.</span>
                <span class="text-sm text-gray-500 hidden sm:inline">Zest Attraction Curiosity</span>
            </a>
            <nav class="space-x-4">
                <a href="#mission" class="text-gray-600 hover:text-indigo-600 font-medium transition duration-150">Our Mission</a>
                <a href="#visualization" class="text-gray-600 hover:text-indigo-600 font-medium transition duration-150">Metrics</a>
                <a href="#methodology" class="text-gray-600 hover:text-indigo-600 font-medium transition duration-150">Methodology</a>
                <a href="#client" class="text-gray-600 hover:text-indigo-600 font-medium transition duration-150">Client Profile</a>
            </nav>
        </div>
    </header>

    <!-- Hero Section: Grand, Absurd Mission Statement -->
    <section id="mission" class="py-20 md:py-32 bg-indigo-700 text-white">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <h1 class="text-4xl sm:text-6xl font-extrabold leading-tight mb-6">
                In a World of Hook-up Culture we are Bringing the "R Word" back: "Relationship"
            </h1>
            <p class="text-xl sm:text-2xl font-light opacity-90">
                If you are looking for the R word, we have the man for you.
            </p>
            <!-- Updated CTA to link to the new Intake Form section -->
            <a href="#intake" class="inline-block mt-10 bg-white text-indigo-700 hover:bg-gray-100 font-bold py-3 px-8 rounded-lg shadow-xl transition duration-300 transform hover:scale-[1.02]">
                Initiate Match Protocol
            </a>
        </div>
    </section>

    <!-- Intake Form Section: The Confidential Pre-Vetting Application -->
    <section id="intake" class="py-16 md:py-24 bg-gray-50 border-b border-gray-200">
        <div class="max-w-3xl mx-auto px-4">
            <h2 class="text-3xl sm:text-4xl font-bold text-center mb-4">
                Confidential Pre-Vetting Application (CPA)
            </h2>
            <p class="text-center text-gray-500 mb-12">
                All data is highly sensitive and utilized solely for compatibility analysis. Completion of all fields is mandatory.
            </p>

            <div class="bg-white p-6 md:p-10 rounded-xl shadow-2xl border border-indigo-100">
                <form onsubmit="event.preventDefault(); document.getElementById('form-success').classList.remove('hidden'); this.reset();" class="space-y-6">

                    <!-- Success Message (appears on submission) -->
                    <div id="form-success" class="hidden p-4 mb-4 text-sm text-teal-800 rounded-lg bg-teal-50 border border-teal-200" role="alert">
                        <span class="font-medium">Application Received:</span> Your data has been successfully ingested into the Compatibility Matrix. Awaiting analytical output.
                    </div>
                    
                    <!-- Field 1: Name/Contact (Standard) -->
                    <div>
                        <label for="full-name" class="block text-sm font-medium text-gray-700">Full Legal Name</label>
                        <!-- Added block w-full for full-width styling consistency -->
                        <input type="text" id="full-name" required placeholder="Full name as per official documentation" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border">
                    </div>

                    <!-- Field 2: Emotional Status (Absurd Dropdown) -->
                    <div>
                        <label for="status" class="block text-sm font-medium text-gray-700">Please select your measurements <br /> If your measurements are not listed, need not apply</label>
                        <select id="status" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border bg-white">
                            <option value="">-- Select From the List of acceptable Measurements --</option>
                            <option value="solo-optimal">36-24-36</option>
                        </select>
                    </div>

                    <!-- Field 3: Toast Setting (Specific, Irrelevant Input) -->
                    <div>
                        <label for="toast-setting" class="block text-sm font-medium text-gray-700">Social Insurance Number</label>
                        <input type="number" id="toast-setting" min="1.0" max="9.0" step="0.1" required placeholder="11111111111" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border">
                        <p class="mt-1 text-xs text-gray-500">Note: This will be veririfed upon consideration.</p>
                    </div>

                    <!-- Field 4: Conflict Protocol (Absurd Textarea) -->
                    <div>
                        <label for="protocol" class="block text-sm font-medium text-gray-700"> List your favourite F1 drivers (Minimum 250 characters)</label>
                        <textarea id="protocol" rows="4" required minlength="250" placeholder="Applications listing Lance Stroll will be burned" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border"></textarea>
                    </div>

                    <!-- Field 5: Compliance Check (Absurd Checkbox) -->
                    <div class="flex items-start">
                        <div class="flex items-center h-5">
                            <input id="compliance" name="compliance" type="checkbox" required class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded">
                        </div>
                        <div class="ml-3 text-sm">
                            <label for="compliance" class="font-medium text-gray-700">I confirm that I will not bottom out the suspension in Zach's vehicle .</label>
                        </div>
                    </div>

                    <div class="pt-4">
                        <button id="audioToggle" type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150">
                            Submit Data for Processing
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>
    
    <!-- 3D Visualization Section: Real-time C-MAT-2.1 Metric Display -->
    <section id="visualization" class="py-16 md:py-24 bg-gray-800 text-white">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <h2 class="text-3xl sm:text-4xl font-bold mb-4">
                Meet the man himself.
            </h2>
            <div id="loading-message" class="text-sm text-yellow-400 mb-2">Loading Model...</div>
            
            <!-- Removed the model selector as requested -->

            <p class="text-lg font-light text-gray-400 mb-8">
                Through the miracle of 3D imaging you can meet Zach now!
                <br class="hidden sm:inline"> (Click and drag to rotate the model to get to know your future man)
            </p>
            
            <!-- Canvas container for Three.js -->
            <div id="three-container" class="w-full h-80 lg:h-96 rounded-xl shadow-2xl bg-gray-900 mx-auto border-4 border-teal-500 overflow-hidden">
                <!-- Canvas will be injected here by Three.js -->
            </div>
        </div>
    </section>

    <!-- Methodology Section: Absurd Steps with Professional Icons -->
    <section id="methodology" class="py-16 md:py-24 bg-white">
        <div class="max-w-6xl mx-auto px-4">
            <h2 class="text-3xl sm:text-4xl font-bold text-center mb-4">
                The AAI™ Alignment Protocol: Four Phases of Optimization
            </h2>
            <p class="text-center text-gray-500 mb-12">
                Our proprietary framework ensures maximum return on emotional investment.
            </p>

            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Phase 1 -->
                <div class="p-6 bg-gray-50 rounded-xl shadow-md hover:shadow-lg transition duration-300">
                    <div class="flex items-center space-x-3 mb-4">
                        <span class="text-3xl font-extrabold text-indigo-600">01</span>
                        <h3 class="text-xl font-semibold">Profile Aggregation</h3>
                    </div>
                    <p class="text-gray-600 text-sm">
                        Comprehensive analysis of 3rd party social data and localized demographic mapping to identify high-potential candidates (HPCs).
                    </p>
                </div>
                <!-- Phase 2 -->
                <div class="p-6 bg-gray-50 rounded-xl shadow-md hover:shadow-lg transition duration-300">
                    <div class="flex items-center space-x-3 mb-4">
                        <span class="text-3xl font-extrabold text-indigo-600">02</span>
                        <h3 class="text-xl font-semibold">Compatibility Matrix Deployment</h3>
                    </div>
                    <p class="text-gray-600 text-sm">
                        Deployment of the C-MAT-2.1 algorithm, weighting variables like preferred pet type and historical ice-cream consumption habits.
                    </p>
                </div>
                <!-- Phase 3 -->
                <div class="p-6 bg-gray-50 rounded-xl shadow-md hover:shadow-lg transition duration-300">
                    <div class="flex items-center space-x-3 mb-4">
                        <span class="text-3xl font-extrabold text-indigo-600">03</span>
                        <h3 class="text-xl font-semibold">Field Deployment & QA</h3>
                    </div>
                    <p class="text-gray-600 text-sm">
                        Scheduled, scripted social interactions designed for optimal data capture and risk minimization. Emotional output tracked via proprietary metrics.
                    </p>
                </div>
                <!-- Phase 4 -->
                <div class="p-6 bg-gray-50 rounded-xl shadow-md hover:shadow-lg transition duration-300">
                    <div class="flex items-center space-x-3 mb-4">
                        <span class="text-3xl font-extrabold text-indigo-600">04</span>
                        <h3 class="text-xl font-semibold">Sustainment & Scalability</h3>
                    </div>
                    <p class="text-gray-600 text-sm">
                        Transition to long-term relationship sustainment (LTRS) mode. Ensuring the partnership is scalable across future life events and potential conflict vectors.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Client Profile Section -->
    <section id="client" class="py-16 md:py-24 bg-gray-100">
        <div class="max-w-4xl mx-auto px-4">
            <h2 class="text-3xl sm:text-4xl font-bold text-center mb-12">
                Principal Candidate Profile: Project Alpha
            </h2>

            <div class="bg-white p-8 md:p-12 rounded-xl shadow-2xl flex flex-col md:flex-row items-center">
                <!-- Client Image Placeholder (Formal Headshot Style) -->
                <div class="w-48 h-48 flex-shrink-0 bg-indigo-200 rounded-full overflow-hidden mb-6 md:mb-0 md:mr-8 border-4 border-indigo-600 shadow-xl">
                    <img src="https://placehold.co/400x400/5e50a1/ffffff?text=CLIENT+IMAGE" alt="Principal Candidate Headshot" class="w-full h-full object-cover">
                </div>
                
                <div class="flex-grow">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">
                        John 'The Optimist' Doe, M.Eng. (Fictional Name)
                    </h3>
                    <p class="text-sm font-semibold text-indigo-600 uppercase mb-4">
                        Lead Strategist (Self-Employed), Age: Classified
                    </p>

                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm">
                        <!-- Absurd, Formal Metrics -->
                        <p class="border-b pb-2">
                            <span class="font-bold text-gray-700">Emotional Bandwidth:</span> High (98th percentile for mid-market individuals).
                        </p>
                        <p class="border-b pb-2">
                            <span class="font-bold text-gray-700">Conflict Mitigation Index (CMI):</span> 7.5/10 (Requires structured de-escalation protocol).
                        </p>
                        <p class="border-b pb-2">
                            <span class="font-bold text-gray-700">Core Competencies:</span> Highly proficient in artisanal toast-making and Level 3 expertise in cat-meme recognition.
                        </p>
                        <p class="border-b pb-2">
                            <span class="font-bold text-gray-700">Retention Rate (Historical):</span> 0% churn in the last 5 years (due to lack of acquisition). High potential ROI.
                        </p>
                    </div>

                    <blockquote class="mt-6 border-l-4 border-indigo-500 pl-4 italic text-gray-600 text-base">
                        "The Candidate exhibits low-risk financial vectors and a proven ability to assemble IKEA furniture, positioning him favorably in the long-term partnership index." - AAI™ Research Note 4.B
                    </blockquote>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonial Section -->
    <section class="py-16 bg-white">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold mb-8">Data-Validated Success</h2>
            
            <div class="flex flex-col md:flex-row justify-center items-stretch gap-8">
                <!-- Testimonial 1 -->
                <div class="bg-gray-50 p-6 rounded-xl shadow-lg border-t-4 border-teal-500">
                    <p class="italic mb-4 text-gray-700">
                        "The framework provided a 94% confidence rating on the initial interaction, dramatically reducing emotional expenditure. Highly scalable."
                    </p>
                    <p class="font-semibold text-sm text-gray-800">— K. Peterson, Strategic Partner (Fictional)</p>
                </div>
                <!-- Testimonial 2 -->
                <div class="bg-gray-50 p-6 rounded-xl shadow-lg border-t-4 border-teal-500">
                    <p class="italic mb-4 text-gray-700">
                        "My pre-acquisition anxiety was reduced by 60%. The post-date analytical reports provided actionable insights for optimization."
                    </p>
                    <p class="font-semibold text-sm text-gray-800">— Dr. L. Chen, Independent Evaluator (Fictional)</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer / CTA -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <h3 class="text-3xl font-bold mb-4">Are you a High-Potential Candidate?</h3>
            <p class="text-gray-400 mb-8">
                If you meet the C-MAT-2.1 criteria, submit your confidential pre-vetting application.
            </p>
            <!-- Updated CTA to link to the form section -->
            <a href="#intake" class="inline-block bg-teal-500 hover:bg-teal-600 text-gray-900 font-bold py-3 px-10 rounded-lg shadow-2xl transition duration-300 transform hover:scale-[1.05]">
                SUBMIT PRE-VETTING APPLICATION
            </a>
            <p class="mt-10 text-sm text-gray-600">
                &copy; 2025 The Affection Alignment Institute (AAI). All Rights Reserved. Emotional data is secured.
            </p>
        </div>
        <audio id="myAudio" src="./sound/sound.mp3"></audio>
    </footer>

    <script>
        // Simple script to handle smooth scrolling for internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        window.onload = function () {
            const container = document.getElementById('three-container');
            const loadingMessage = document.getElementById('loading-message');
            if (!container) return;

            let scene, camera, renderer, object;
            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };
            
            // Define factory functions for built-in geometries (used as fallback/alternatives)
            const geometryParameters = {
                // If a real STL fails to load, we fall back to this TorusKnot
                torusKnot: () => new THREE.TorusKnotGeometry(1, 0.3, 100, 16),
                icosahedron: () => new THREE.IcosahedronGeometry(1.5, 0),
                dodecahedron: () => new THREE.DodecahedronGeometry(1.5, 0)
            };
            
            // Set initial rotation values to persist across geometry loads
            let rotationX = 0;
            let rotationY = 0;

            function init() {
                // Setup Scene
                scene = new THREE.Scene();
                scene.background = new THREE.Color(0x111827); // Tailwind gray-900

                // Setup Camera
                camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
                camera.position.z = 3; // Closer view for smaller objects

                // Setup Renderer
                renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setSize(container.clientWidth, container.clientHeight);
                container.appendChild(renderer.domElement);
                
                // Add Lights
                const ambientLight = new THREE.AmbientLight(0x404040, 2);
                scene.add(ambientLight);

                const pointLight = new THREE.PointLight(0xffffff, 50);
                pointLight.position.set(10, 10, 10);
                scene.add(pointLight);

                // Initial load: Directly load the single, specified STL model
                loadModel();

                // Event Listeners for Interaction
                renderer.domElement.addEventListener('mousedown', onMouseDown, false);
                renderer.domElement.addEventListener('mousemove', onMouseMove, false);
                renderer.domElement.addEventListener('mouseup', onMouseUp, false);
                renderer.domElement.addEventListener('touchstart', onTouchStart, false);
                renderer.domElement.addEventListener('touchmove', onTouchMove, false);
                renderer.domElement.addEventListener('touchend', onTouchEnd, false);

                window.addEventListener('resize', onWindowResize, false);

                animate();
            }
            
            /**
             * Cleans up the previous 3D object from the scene.
             */
            function cleanupObject() {
                if (object) {
                    scene.remove(object);
                    if (object.geometry) object.geometry.dispose();
                    if (object.material) object.material.dispose();
                    object = null;
                }
            }

            /**
             * Creates and adds a mesh to the scene using a provided geometry.
             * @param {THREE.BufferGeometry} geometry - The geometry (e.g., from STLLoader or built-in).
             */
            function createMesh(geometry) {
                // Center the geometry
                geometry.computeBoundingBox();
                const center = geometry.boundingBox.getCenter(new THREE.Vector3());
                geometry.translate(-center.x, -center.y, -center.z);

                // Create a glossy, metallic material for a high-tech look
                const material = new THREE.MeshStandardMaterial({ 
                    color: 0x10b981, // Tailwind teal-500
                    roughness: 0.2,
                    metalness: 0.8,
                    wireframe: false
                });
                
                // Create the mesh
                object = new THREE.Mesh(geometry, material);
                
                // Apply stored rotation values to the new object
                object.rotation.x = rotationX;
                object.rotation.y = rotationY;
                
                // Scale STL files down if they are too large (typical issue with STL imports)
                const size = geometry.boundingBox.max.distanceTo(geometry.boundingBox.min);
                if (size > 5) {
                    object.scale.set(0.1, 0.1, 0.1);
                }

                scene.add(object);
                loadingMessage.classList.add('hidden');
            }

            /**
             * Loads the specified STL file from the external URL.
             */
            window.loadModel = function() {
                cleanupObject();
                
                // The specific STL URL requested by the user
                const stlUrl = 'https://raw.githubusercontent.com/deadclover/pages-test/refs/heads/main/stl/helpless_survivor3_old_man.stl'; 
                loadingMessage.textContent = `Attempting to load STL model from external URL...`;
                loadingMessage.classList.remove('hidden');
                console.log(`Attempting to load STL file from URL: ${stlUrl}`);
                
                const loader = new THREE.STLLoader();

                // The loader attempts an HTTP GET request to this URL.
                loader.load(
                    stlUrl,
                    // Success Callback: Fired if the STL file loads successfully
                    function (geometry) {
                        console.log(`STL file loaded successfully from ${stlUrl}.`);
                        createMesh(geometry);
                    },
                    // Progress Callback 
                    function (xhr) {
                        // Display progress to the user
                        const percent = Math.floor((xhr.loaded / xhr.total * 100));
                        loadingMessage.textContent = `Downloading STL: ${percent}% complete...`;
                    },
                    // Error Callback: Fired if the STL file fails to load (likely due to CORS or 404)
                    function (error) {
                        console.error(`Failed to load STL file from ${stlUrl}. Falling back to default geometry.`, error);
                        // Fallback to a complex built-in geometry (Torus Knot)
                        const fallbackGeometry = geometryParameters.torusKnot();
                        createMesh(fallbackGeometry);
                        loadingMessage.textContent = 'STL URL load failed (CORS/404). Showing fallback geometry.';
                    }
                );
            }


            function onWindowResize() {
                const width = container.clientWidth;
                const height = container.clientHeight;
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
                renderer.setSize(width, height);
            }

            function onMouseDown(event) {
                isDragging = true;
                previousMousePosition.x = event.clientX;
                previousMousePosition.y = event.clientY;
            }

            function onMouseMove(event) {
                if (!isDragging || !object) return;
                
                const deltaX = event.clientX - previousMousePosition.x;
                const deltaY = event.clientY - previousMousePosition.y;

                // Update rotation and store values
                object.rotation.y += deltaX * 0.005;
                object.rotation.x += deltaY * 0.005;
                rotationY = object.rotation.y;
                rotationX = object.rotation.x;

                previousMousePosition.x = event.clientX;
                previousMousePosition.y = event.clientY;
            }

            function onMouseUp() {
                isDragging = false;
            }

            function onTouchStart(event) {
                event.preventDefault();
                isDragging = true;
                // Get the position of the first touch point
                previousMousePosition.x = event.touches[0].clientX;
                previousMousePosition.y = event.touches[0].clientY;
            }

            function onTouchMove(event) {
                event.preventDefault();
                if (!isDragging || !object) return;

                const deltaX = event.touches[0].clientX - previousMousePosition.x;
                const deltaY = event.touches[0].clientY - previousMousePosition.y;

                // Update rotation and store values
                object.rotation.y += deltaX * 0.005;
                object.rotation.x += deltaY * 0.005;
                rotationY = object.rotation.y;
                rotationX = object.rotation.x;

                previousMousePosition.x = event.touches[0].clientX;
                previousMousePosition.y = event.touches[0].clientY;
            }

            function onTouchEnd() {
                isDragging = false;
            }


            function animate() {
                requestAnimationFrame(animate);

                if (object && !isDragging) {
                    // Gentle auto-rotation when not dragging
                    object.rotation.x += 0.001;
                    object.rotation.y += 0.002;
                    rotationY = object.rotation.y;
                    rotationX = object.rotation.x;
                }
                
                renderer.render(scene, camera);
            }

            // Start the 3D visualization
            init();
        };
    </script>
    <script>
        const audio = document.getElementById('myAudio');
        const btn = document.getElementById('audioToggle');
        const statusText = document.getElementById('statusText');

        btn.addEventListener('click', () => {
            if (audio.paused) {
                audio.play()
                    .then(() => {
                        updateUI(true);
                    })
                    .catch(error => {
                        console.error("Playback failed:", error);
                    });
            } else {
                audio.pause();
                updateUI(false);
            }
        });

        // Event listener for when audio ends naturally
        audio.addEventListener('ended', () => {
            updateUI(false);
            audio.currentTime = 0;
        });

        function updateUI(isPlaying) {
            if (isPlaying) {
                btn.classList.add('playing-glow', 'bg-blue-500');
            } else {
                btn.classList.remove('playing-glow', 'bg-blue-500');
            }
        }
    </script>
</body>
</html>